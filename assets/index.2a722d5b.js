var _=Object.defineProperty,x=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var h=(e,t,i)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,p=(e,t)=>{for(var i in t||(t={}))W.call(t,i)&&h(e,i,t[i]);if(d)for(var i of d(t))T.call(t,i)&&h(e,i,t[i]);return e},f=(e,t)=>x(e,E(t));var l=(e,t,i)=>(h(e,typeof t!="symbol"?t+"":t,i),i);import{a as z,d as v,c as $,b as u,n as k,p as b,e as I,o as g,r as O,f as C,g as P,h as F,i as X,j as Y}from"./vendor.21e2c106.js";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}};M();const m=e=>{var s;let t=e==null?void 0:e.getBoundingClientRect(),i=((s=e==null?void 0:e.ownerDocument)==null?void 0:s.defaultView)||{pageXOffset:0,pageYOffset:0};return{left:((t==null?void 0:t.left)||0)+i.pageXOffset,top:((t==null?void 0:t.top)||0)+i.pageYOffset}};class R{constructor(t,i=3,s,n,r="zh_TW"){l(this,"drawIng",!1);l(this,"timeout",-1);l(this,"x",[]);l(this,"y",[]);l(this,"ink",[]);this.canvas=t,this.penSize=i,this.canvasSize=s,this.ctx=n,this.language=r,n||(n=t.getContext("2d")),this.init()}mousedownEvent(t){t.preventDefault();let i=this.canvas.getBoundingClientRect();this.StartWrite(t.clientX-i.left,t.clientY-i.top)}mousemoveEvent(t){t.preventDefault();let i=this.canvas.getBoundingClientRect();this.MoveWrite(t.clientX-i.left,t.clientY-i.top)}touchstartEvent(t){clearTimeout(this.timeout),t.preventDefault(),this.drawIng=!0;let i=t.targetTouches[0],s=m(this.canvas),n=i.pageX-s.left,r=i.pageY-s.top;this.ctx&&this.drawIng&&(this.ctx.beginPath(),this.ctx.moveTo(n,r),this.addXY(n,r))}touchmoveEvent(t){clearTimeout(this.timeout);let i=t.targetTouches[0],s=m(this.canvas),n=i.pageX-s.left,r=i.pageY-s.top;this.ctx&&this.drawIng&&(this.ctx.lineTo(n,r),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(n,r),this.addXY(n,r))}stopWriteEvent(){clearTimeout(this.timeout),this.drawIng&&(this.ink.push([this.x,this.y,[]]),this.x=this.y=[]),this.drawIng=!1,this.timeout=window.setTimeout(()=>{this.clearCanvas(),this.finish()},2e3)}clearCanvas(){var t,i,s;(s=this.ctx)==null||s.clearRect(0,0,((t=this.canvas)==null?void 0:t.width)||0,((i=this.canvas)==null?void 0:i.height)||0)}addXY(t,i){this.x.push(t),this.y.push(i)}finish(){this.goGetFont()}init(){this.clearCanvas(),this.x=this.y=[]}goGetFont(){z(f(p({},this.goGetFontData()),{method:"POST"})).then(t=>t.data).then(t=>{this.x=this.y=[],console.log(this.x),console.log(t[1][0][1])})}goGetFontData(){return{url:"https://www.google.com.tw/inputtools/request?ime=handwriting&app=mobilesearch&cs=1&oe=UTF-8",headers:{"content-type":"application/json"},data:{options:"enable_pre_space",requests:[{writing_guide:{writing_area_width:this.canvasSize,writing_area_height:this.canvasSize},ink:this.ink,language:this.language}]}}}StartWrite(t,i){clearTimeout(this.timeout),this.drawIng=!0,this.ctx&&(this.ctx.lineWidth=this.penSize,this.ctx.beginPath(),this.ctx.moveTo(t,i)),this.addXY(t,i)}MoveWrite(t,i){clearTimeout(this.timeout),this.ctx&&this.drawIng&&(this.ctx.lineWidth=this.penSize,this.ctx.lineTo(t,i),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t,i),this.addXY(t,i))}}var w=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i};const B=v({name:"addFont",data(){return{configs:[{open:!0,info:"",value:null}],penSize:3,canvasSize:Math.min(window.innerWidth*.9,400),canvas:null,ctx:null,word:null}},methods:{init(){if(this.canvas){this.ctx=this.canvas.getContext("2d");let e=this.ctx,t=window.devicePixelRatio||1,i=this.canvas.getBoundingClientRect();this.word=new R(this.canvas,this.penSize,this.canvasSize,e),Object.assign(window,{Word:this.word}),e&&(this.canvasSize=Math.min(i.width*t,i.height*t),e.scale(t,t),e.lineCap="round",e.lineJoin="round",e.strokeStyle="black")}}},mounted(){this.canvas=this.$refs.canvas,this.init()},computed:{lang:function(){return localStorage.getItem("lang")}},watch:{canvasSize:function(e){this.word&&(this.word.canvasSize=this.canvasSize)},lang:function(e){console.log(e)}}}),D=e=>(b("data-v-3517d8a9"),e=e(),I(),e),L={class:"wroteFontDiv flex flex-down flex-item-center"},A=D(()=>u("div",{class:"tools flex flex-item-center flex-center"},[u("div",{class:"configs"})],-1)),j=["width","height"];function q(e,t,i,s,n,r){return g(),$("div",L,[A,u("canvas",{ref:"canvas",class:"writeFont",width:e.canvasSize,height:e.canvasSize,style:k({width:`${e.canvasSize}px`,height:`${e.canvasSize}px`}),onMousedown:t[0]||(t[0]=(...o)=>{var a,c;return((a=e.word)==null?void 0:a.mousedownEvent)&&((c=e.word)==null?void 0:c.mousedownEvent(...o))}),onMousemove:t[1]||(t[1]=(...o)=>{var a,c;return((a=e.word)==null?void 0:a.mousemoveEvent)&&((c=e.word)==null?void 0:c.mousemoveEvent(...o))}),onMouseup:t[2]||(t[2]=(...o)=>{var a,c;return((a=e.word)==null?void 0:a.stopWriteEvent)&&((c=e.word)==null?void 0:c.stopWriteEvent(...o))}),onMouseout:t[3]||(t[3]=(...o)=>{var a,c;return((a=e.word)==null?void 0:a.stopWriteEvent)&&((c=e.word)==null?void 0:c.stopWriteEvent(...o))}),onTouchstart:t[4]||(t[4]=(...o)=>{var a,c;return((a=e.word)==null?void 0:a.touchstartEvent)&&((c=e.word)==null?void 0:c.touchstartEvent(...o))}),onTouchmove:t[5]||(t[5]=(...o)=>{var a,c;return((a=e.word)==null?void 0:a.touchmoveEvent)&&((c=e.word)==null?void 0:c.touchmoveEvent(...o))}),onTouchend:t[6]||(t[6]=(...o)=>{var a,c;return((a=e.word)==null?void 0:a.stopWriteEvent)&&((c=e.word)==null?void 0:c.stopWriteEvent(...o))})},null,44,j)])}var G=w(B,[["render",q],["__scopeId","data-v-3517d8a9"]]);const N=v({name:"HelloWorld",data(){return{}},components:{WriteFont:G}});function H(e,t,i,s,n,r){const o=O("WriteFont");return g(),C(o)}var S=w(N,[["render",H]]),V=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:S});const J="modulepreload",y={},K="/make-font/",U=function(t,i){return!i||i.length===0?t():Promise.all(i.map(s=>{if(s=`${K}${s}`,s in y)return;y[s]=!0;const n=s.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":J,n||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),n)return new Promise((a,c)=>{o.addEventListener("load",a),o.addEventListener("error",c)})})).then(()=>t())},Q=[{name:"Home",path:"/",component:()=>U(()=>Promise.resolve().then(function(){return V}),void 0)}],Z=P({history:F(),routes:Q});var tt=X({state:{},mutations:{},actions:{},modules:{},getters:{}});Y(S).use(Z).use(tt).mount("#app");
