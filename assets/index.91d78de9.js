var m=Object.defineProperty;var w=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var c=(e,t,n)=>(w(e,typeof t!="symbol"?t+"":t,n),n);import{d as u,c as S,a as h,n as W,p as y,b as _,o as d,r as E,e as I,f as z,g as T,h as b,i as k}from"./vendor.92600367.js";const $=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}};$();const f=e=>{var o;let t=e==null?void 0:e.getBoundingClientRect(),n=((o=e==null?void 0:e.ownerDocument)==null?void 0:o.defaultView)||{pageXOffset:0,pageYOffset:0};return{left:((t==null?void 0:t.left)||0)+n.pageXOffset,top:((t==null?void 0:t.top)||0)+n.pageYOffset}};class x{constructor(t,n=3,o,i,l="zh_TW"){c(this,"drawIng",!1);c(this,"timeout",-1);c(this,"WordInfo");this.canvas=t,this.penSize=n,this.canvasSize=o,this.ctx=i,this.language=l,i||(i=t.getContext("2d")),this.init()}mousedownEvent(t){t.preventDefault();let n=this.canvas.getBoundingClientRect();this.StartWrite(t.clientX-n.left,t.clientY-n.top)}mousemoveEvent(t){t.preventDefault();let n=this.canvas.getBoundingClientRect();this.MoveWrite(t.clientX-n.left,t.clientY-n.top)}touchstartEvent(t){clearTimeout(this.timeout),t.preventDefault(),this.drawIng=!0;let n=t.targetTouches[0],o=f(this.canvas);this.StartWrite(n.pageX-o.left,n.pageY-o.top)}touchmoveEvent(t){clearTimeout(this.timeout);let n=t.targetTouches[0],o=f(this.canvas);this.MoveWrite(n.pageX-o.left,n.pageY-o.top)}stopWriteEvent(){var t;this.drawIng&&((t=this.WordInfo)==null||t.splitStroke()),this.timeout=window.setTimeout(()=>{var n;this.clearCanvas(),(n=this.WordInfo)==null||n.fetch().then(o=>o.json()).then(o=>{var i;(i=this.WordInfo)==null||i.init(),console.log(o[1][0][1])})},2e3),this.drawIng=!1}clearCanvas(){var t,n,o;(o=this.ctx)==null||o.clearRect(0,0,((t=this.canvas)==null?void 0:t.width)||0,((n=this.canvas)==null?void 0:n.height)||0)}init(){this.clearCanvas(),this.WordInfo=new O(this.canvasSize,this.canvasSize,this.language)}StartWrite(t,n){var o;clearTimeout(this.timeout),!this.drawIng&&this.ctx&&(this.ctx.lineWidth=this.penSize,this.ctx.beginPath(),this.ctx.moveTo(t,n),this.drawIng=!0,(o=this.WordInfo)==null||o.addXY(t,n))}MoveWrite(t,n){var o;clearTimeout(this.timeout),this.ctx&&this.drawIng&&(this.ctx.lineWidth=this.penSize,this.ctx.lineTo(t,n),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t,n),(o=this.WordInfo)==null||o.addXY(t,n))}}class O{constructor(t,n,o="zh_TW"){c(this,"x",[]);c(this,"y",[]);c(this,"ink",[]);this.width=t,this.height=n,this.language=o}init(){this.x=this.y=[],this.ink=[]}addXY(t,n){this.x.push(t),this.y.push(n)}splitStroke(){this.ink.push([this.x,this.y,[]]),this.x=this.y=[]}fetch(){return fetch("https://www.google.com.tw/inputtools/request?ime=handwriting&app=mobilesearch&cs=1&oe=UTF-8",{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({options:"enable_pre_space",requests:[{ink:this.ink,language:this.language,writing_guide:{writing_area_width:this.width,writing_area_height:this.height}}]})})}}var p=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const C=u({name:"addFont",data(){return{configs:[{open:!0,info:"",value:null}],penSize:3,ratio:1,canvasSize:Math.min(window.innerWidth*.9,400),canvasStyle:400,canvas:null,ctx:null,word:null}},methods:{init(){if(this.canvas){this.ctx=this.canvas.getContext("2d");let e=this.ctx,t=window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect();console.log(this.ratio),this.word=new x(this.canvas,this.penSize,this.canvasSize,e),Object.assign(window,{Word:this.word}),e&&(this.canvasSize=Math.min(n.width*t,n.height*t),e.scale(t,t),e.lineCap="round",e.lineJoin="round",e.strokeStyle="black")}}},mounted(){this.canvas=this.$refs.canvas,this.init()},computed:{lang:function(){return localStorage.getItem("lang")}},watch:{canvasSize:function(e){this.word&&(this.word.canvasSize=this.canvasSize)},lang:function(e){console.log(e)}}}),P=e=>(y("data-v-640abb32"),e=e(),_(),e),M={class:"wroteFontDiv flex flex-down flex-item-center"},R=P(()=>h("div",{class:"tools flex flex-item-center flex-center"},[h("div",{class:"configs"})],-1)),X=["width","height"];function Y(e,t,n,o,i,l){return d(),S("div",M,[R,h("canvas",{ref:"canvas",class:"writeFont",width:e.canvasSize,height:e.canvasSize,style:W({width:`${e.canvasStyle}px`,height:`${e.canvasStyle}px`}),onMousedown:t[0]||(t[0]=(...s)=>{var r,a;return((r=e.word)==null?void 0:r.mousedownEvent)&&((a=e.word)==null?void 0:a.mousedownEvent(...s))}),onMousemove:t[1]||(t[1]=(...s)=>{var r,a;return((r=e.word)==null?void 0:r.mousemoveEvent)&&((a=e.word)==null?void 0:a.mousemoveEvent(...s))}),onMouseup:t[2]||(t[2]=(...s)=>{var r,a;return((r=e.word)==null?void 0:r.stopWriteEvent)&&((a=e.word)==null?void 0:a.stopWriteEvent(...s))}),onMouseout:t[3]||(t[3]=(...s)=>{var r,a;return((r=e.word)==null?void 0:r.stopWriteEvent)&&((a=e.word)==null?void 0:a.stopWriteEvent(...s))}),onTouchstart:t[4]||(t[4]=(...s)=>{var r,a;return((r=e.word)==null?void 0:r.touchstartEvent)&&((a=e.word)==null?void 0:a.touchstartEvent(...s))}),onTouchmove:t[5]||(t[5]=(...s)=>{var r,a;return((r=e.word)==null?void 0:r.touchmoveEvent)&&((a=e.word)==null?void 0:a.touchmoveEvent(...s))}),onTouchend:t[6]||(t[6]=(...s)=>{var r,a;return((r=e.word)==null?void 0:r.stopWriteEvent)&&((a=e.word)==null?void 0:a.stopWriteEvent(...s))})},null,44,X)])}var B=p(C,[["render",Y],["__scopeId","data-v-640abb32"]]);const F=u({name:"HelloWorld",data(){return{}},components:{WriteFont:B}});function L(e,t,n,o,i,l){const s=E("WriteFont");return d(),I(s)}var v=p(F,[["render",L]]),A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:v});const D="modulepreload",g={},j="/make-font/",N=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${j}${o}`,o in g)return;g[o]=!0;const i=o.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${l}`))return;const s=document.createElement("link");if(s.rel=i?"stylesheet":D,i||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),i)return new Promise((r,a)=>{s.addEventListener("load",r),s.addEventListener("error",a)})})).then(()=>t())},q=[{name:"Home",path:"/",component:()=>N(()=>Promise.resolve().then(function(){return A}),void 0)}],H=z({history:T(),routes:q});var V=b({state:{},mutations:{},actions:{},modules:{},getters:{}});k(v).use(H).use(V).mount("#app");
